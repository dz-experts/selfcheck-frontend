(this["webpackJsonpsurvey-frontend"]=this["webpackJsonpsurvey-frontend"]||[]).push([[0],{50:function(e){e.exports=JSON.parse('{"Accueil":"\u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629","Ce site d\u2019information n\u2019est pas un dispositif m\xe9dical, il ne d\xe9livre pas d\u2019avis m\xe9dical.":"\u0647\u0630\u0627 \u0627\u0644\u0645\u0648\u0642\u0639 \u0644\u0627 \u064a\u0642\u062f\u0645 \u0622\u0631\u0627\u0621\u0627 \u0637\u0628\u064a\u0629","Vous pensez avoir \xe9t\xe9 expos\xe9 au Coronavirus COVID-19 et avez des sympt\xf4mes ?":"\u0647\u0644 \u062a\u0639\u062a\u0642\u062f \u0623\u0646\u0643 \u0642\u062f \u062a\u0639\u0631\u0636\u062a \u0625\u0644\u0649 \u0641\u064a\u0631\u0648\u0633 \u0643\u0648\u0631\u0648\u0646 COVID-19 \u0648\u0644\u062f\u064a\u0643 \u0623\u0639\u0631\u0627\u0636\u061f","Faites le test pour r\xe9pondre en citoyen \xe9clair\xe9 selon vos sympt\xf4mes.":"\u0642\u0645 \u0628\u0647\u0630\u0627 \u0627\u0644\u0641\u062d\u0635.","D\xe9marrer le test":"\u0625\u0628\u062f\u0623 \u0627\u0644\u0641\u062d\u0635","Question":"\u0633\u0624\u0627\u0644","sur":"\u0645\u0646","Continuer":"\u062a\u0627\u0628\u0639","R\xe9sultats":"\u0627\u0644\u0646\u062a\u0627\u0626\u062c","Reprendre le test":"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0641\u062d\u0635","Informations":"\u0645\u0639\u0644\u0648\u0645\u0627\u062a","Questionnaire":"\u0627\u0644\u0623\u0633\u0626\u0644\u0629"}')},51:function(e){e.exports=JSON.parse('{"Accueil":null,"Ce site d\u2019information n\u2019est pas un dispositif m\xe9dical, il ne d\xe9livre pas d\u2019avis m\xe9dical.":null,"Vous pensez avoir \xe9t\xe9 expos\xe9 au Coronavirus COVID-19 et avez des sympt\xf4mes ?":null,"Faites le test pour r\xe9pondre en citoyen \xe9clair\xe9 selon vos sympt\xf4mes.":null,"D\xe9marrer le test":null,"Question":null,"sur":null,"Continuer":null,"R\xe9sultats":null,"Reprendre le test":null,"Informations":null,"Questionnaire":null}')},56:function(e,t,a){e.exports=a(96)},95:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(46),l=a.n(s),i=a(19),c=a(25),o=a(23),u=a(24),m=a(28),d=a(29),p=a(2),f=a(34),v=a(50),g=a(51);f.a.use(p.a).init({lng:"fr",nsSeparator:!1,keySeparator:!1,fallbackLng:!1,returnNull:!1,resources:{ar:{translation:v},en:{translation:g}}});var E=function(e){return"ar"===e},b=(f.a,function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e){var t=E(this.props.i18n.language)?"rtl":"ltr";document.body.dir!==t&&(document.body.dir=t)}},{key:"render",value:function(){var e=this.props,t=e.t,a=e.i18n,n=e.route;return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar is-primary",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(i.b,{to:"/",className:"navbar-item"},r.a.createElement("strong",null,t("Accueil"))),r.a.createElement("a",{href:"#",className:"navbar-burger","aria-label":"menu","aria-expanded":"false"},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("a",{href:"#",className:"navbar-item ".concat("fr"===a.language?"is-active":""),onClick:function(e){a.changeLanguage("fr"),e.preventDefault()}},"Fran\xe7ais"),r.a.createElement("a",{href:"#",className:"navbar-item ".concat("ar"===a.language?"is-active":""),onClick:function(e){a.changeLanguage("ar"),e.preventDefault()}},"\u0627\u0644\u0639\u0631\u0628\u064a\u0629")))),Object(c.a)(n.routes),r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"content has-text-centered"},r.a.createElement("p",null,t("Ce site d\u2019information n\u2019est pas un dispositif m\xe9dical, il ne d\xe9livre pas d\u2019avis m\xe9dical.")))))}}]),a}(r.a.Component)),h=Object(p.b)()(b),y=a(12),N=a(7);var k=Object(p.b)()((function(e){var t=e.t,a=e.i18n;return r.a.createElement("div",null,r.a.createElement("section",{className:"hero is-medium is-bold"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},t("Vous pensez avoir \xe9t\xe9 expos\xe9 au Coronavirus COVID-19 et avez des sympt\xf4mes ?")),r.a.createElement("h2",{className:"subtitle"},t("Faites le test pour r\xe9pondre en citoyen \xe9clair\xe9 selon vos sympt\xf4mes.")),r.a.createElement(i.b,{to:"/survey",className:"button is-primary"},r.a.createElement("span",null,t("D\xe9marrer le test")),r.a.createElement("span",{className:"icon is-small"},r.a.createElement(y.a,{icon:E(a.language)?N.a:N.b})))))))})),x=a(6),O=a(54),_=a.n(O),w="https://mofeedz.herokuapp.com/api/public",q=function(){return _.a.create({baseURL:w})},j={get:function(){return q().get("/questions/")},post:function(e){var t=e.answers;return q().post("/questions/",{data:t})}};var C=Object(p.b)()((function(e){var t=e.t;return r.a.createElement("section",{className:"section has-text-centered"},r.a.createElement("span",{className:"icon is-large"},r.a.createElement(y.a,{icon:N.d,pulse:!0,size:"3x"})),r.a.createElement("br",null),r.a.createElement("br",null),t("Chargement.."))}));var L=Object(p.b)()((function(e){e.t;var t=e.message,a=e.buttonLabel,n=e.handleButtonClick;return r.a.createElement("section",{className:"section has-text-centered"},r.a.createElement("span",{className:"icon is-large"},r.a.createElement(y.a,{icon:N.c,size:"3x"})),r.a.createElement("br",null),r.a.createElement("br",null),t,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"button is-warning",onClick:n},r.a.createElement("span",null,a)))}));var S=Object(p.b)()((function(e){var t=e.t,a=e.i18n,n=e.stepForward;return r.a.createElement("div",null,r.a.createElement("div",{className:"box"},r.a.createElement("h2",{className:"title"},"Pr\xe9ambule"),r.a.createElement("p",null,"\xab L\u2019application est fournie \xe0 titre gratuit, en l\u2019\xe9tat, uniquement \xe0 des fins d\u2019information pour contribuer \xe0 fluidifier la prise en charge des personnes par les services d\u2019urgences pendant l\u2019\xe9pid\xe9mie de Coronavirus COVID-19. L\u2019exhaustivit\xe9, l\u2019exactitude, le caract\xe8re \xe0 jour des informations et contenus mis \xe0 disposition dans cette application, ou leur ad\xe9quation \xe0 des finalit\xe9s particuli\xe8res, ne sont pas garantis.",r.a.createElement("br",null),r.a.createElement("br",null),"L\u2019utilisateur reconna\xeet que l\u2019application y compris le test et les autres informations qu\u2019elle contient, ne constituent en aucun cas un avis, une recommandation, un examen, un diagnostic, une prescription, ou tout autre acte de nature m\xe9dicale notamment \xe9tabli ou r\xe9alis\xe9 par un m\xe9decin ou un pharmacien. L\u2019utilisation de l\u2019application et de son contenu ne remplace en aucun cas le conseil n\xe9cessaire donn\xe9 par votre m\xe9decin ou votre pharmacien ou tout autre professionnel de sant\xe9 comp\xe9tent dans chaque cas particulier. Tout examen ou d\xe9cision de l\u2019utilisateur doit \xeatre r\xe9alis\xe9 ou prise de mani\xe8re autonome sur la base de l\u2019information scientifique et clinique pertinente, de la notice officielle du produit concern\xe9 le cas \xe9ch\xe9ant et en cas de doute, en consultant un m\xe9decin comp\xe9tent.",r.a.createElement("br",null),r.a.createElement("br",null),"Les informations mises \xe0 disposition dans le cadre de l\u2019application servent uniquement d\u2019informations de premier niveau. L\u2019absence d\u2019avertissement au sujet d\u2019un risque ne signifie pas qu\u2019il n\u2019existe pas. \xbb")),r.a.createElement("button",{className:"button is-primary",onClick:function(e){n({}),e.preventDefault()}},r.a.createElement("span",null,t("D\xe9marrer le test")),r.a.createElement("span",{className:"icon is-small"},r.a.createElement(y.a,{icon:E(a.language)?N.a:N.b}))))})),A=a(15),I=a(55),T=a(27),B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};switch(e){case"required":return function(){return t("Ce champ est r\xe9quis")};case"min":return function(e){return"".concat(t("Valeur minimale:")," ").concat(e)};case"max":return function(e){return"".concat(t("Valeur maximale:")," ").concat(e)};case"minLength":return function(e){return"".concat(t("La valeur doit comprendre au moins")," ").concat(e," ").concat(t("caract\xe8res"))};case"maxLength":return function(e){return"".concat(t("La valeur doit comprendre au plus")," ").concat(e," ").concat(t("caract\xe8res"))};default:return t("Valeur non valide")}};var D=Object(p.b)()((function(e){var t=e.t,a=e.i18n,n=e.question,s=e.register,l=e.errors;return r.a.createElement("div",null,r.a.createElement("div",{class:"field has-addons"},r.a.createElement("p",{class:"control"},r.a.createElement("input",{className:"input ".concat(l[n.key]?"is-danger":""),name:n.key,type:"text",ref:s(Object(T.a)({required:{value:!0,message:B("required",t)()}},void 0!==n.format.min_length?{minLength:{value:n.format.minLength,message:B("minLength",t)(n.format.minLength)}}:{},{},void 0!==n.format.max_length?{maxLength:{value:n.format.maxLength,message:B("maxLength",t)(n.format.maxLength)}}:{}))})),null!==n.format["suffix_".concat(a.language)]&&r.a.createElement("p",{class:"control"},r.a.createElement("a",{class:"button is-static"},n.format["suffix_".concat(a.language)]))),l[n.key]&&r.a.createElement("p",{className:"help is-danger"},l[n.key].message,"."))}));var F=Object(p.b)()((function(e){var t=e.t,a=e.i18n,n=e.question,s=e.register,l=e.errors;return r.a.createElement("div",null,r.a.createElement("div",{class:"field has-addons"},r.a.createElement("p",{class:"control"},r.a.createElement("input",{className:"input ".concat(l[n.key]?"is-danger":""),name:n.key,type:"number",step:["decimal","float"].indexOf(n.format.kind)>-1?"0.01":"1",ref:s(Object(T.a)({required:{value:!0,message:B("required",t)()}},void 0!==n.format.min?{min:{value:n.format.min,message:B("min",t)(n.format.min)}}:{},{},void 0!==n.format.max?{max:{value:n.format.max,message:B("max",t)(n.format.max)}}:{}))})),null!==n.format["suffix_".concat(a.language)]&&r.a.createElement("p",{class:"control"},r.a.createElement("a",{class:"button is-static"},n.format["suffix_".concat(a.language)]))),l[n.key]&&r.a.createElement("p",{className:"help is-danger"},l[n.key].message,"."))}));var R=Object(p.b)()((function(e){var t=e.t,a=e.i18n,n=e.question,s=e.register,l=e.errors;return r.a.createElement("div",null,r.a.createElement("div",{class:"field has-addons"},r.a.createElement("p",{class:"control"},r.a.createElement("div",{className:"select ".concat(l[n.key]?"is-danger":"")},r.a.createElement("select",{name:n.key,ref:s({required:{value:!0,message:B("required",t)()}})},n.format.choices.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e["label_".concat(a.language)])}))))),null!==n.format["suffix_".concat(a.language)]&&r.a.createElement("p",{class:"control"},r.a.createElement("a",{class:"button is-static"},n.format["suffix_".concat(a.language)]))),l[n.key]&&r.a.createElement("p",{className:"help is-danger"},l[n.key].message,"."))}));var Q=Object(p.b)()((function(e){var t=e.t,a=e.i18n,n=e.question,s=e.register,l=e.errors;return r.a.createElement("div",{className:"control"},n.format.choices.map((function(e){return r.a.createElement("label",{className:"radio",key:e.value},r.a.createElement("input",{type:"radio",name:n.key,value:e.value,ref:s({required:{value:!0,message:B("required",t)()}})}),e["label_".concat(a.language)],r.a.createElement("br",null))})),l[n.key]&&r.a.createElement("p",{className:"help is-danger"},l[n.key].message,"."))}));var V=Object(p.b)()((function(e){var t=e.t,a=e.i18n,s=e.current_step,l=e.questions,i=e.answers,c=e.addAnswer,o=e.stepForward,u=e.stepBack,m=l[s-1],d=Object(n.useState)(!1),p=Object(A.a)(d,2),f=p[0],v=p[1],g={};g[m.key]=m.default_value;var b=Object(I.a)({defaultValues:g}),h=b.handleSubmit,k=b.register,x=b.errors,O=b.reset;return r.a.createElement("form",{onSubmit:h((function(e){v(!0),c(m.id,m.key,e[m.key]),o().then((function(){O(),v(!1)})).catch((function(){v(!1)}))}))},r.a.createElement("div",{className:"box"},r.a.createElement("button",{className:"button is-white",onClick:function(e){if(i.length){var t={};t[i[i.length-1].key]=i[i.length-1].value,O(t)}u(),e.preventDefault()}},r.a.createElement("span",{className:"icon is-small"},r.a.createElement(y.a,{icon:E(a.language)?N.b:N.a})),r.a.createElement("span",null,t("Question")," ",s," ",t("sur")," ",l.length)),r.a.createElement("h2",{className:"title"},m["text_".concat(a.language)]),r.a.createElement("div",{className:"tile"},"text"===m.format.type.toLowerCase()&&r.a.createElement(D,{question:m,register:k,errors:x}),"number"===m.format.type.toLowerCase()&&r.a.createElement(F,{question:m,register:k,errors:x}),"select"===m.format.type.toLowerCase()&&r.a.createElement(R,{question:m,register:k,errors:x}),"radio"===m.format.type.toLowerCase()&&r.a.createElement(Q,{question:m,register:k,errors:x}))),r.a.createElement("button",{className:"button is-light ".concat(f?"is-loading":""),type:"submit"},r.a.createElement("span",null,t("Continuer")),r.a.createElement("span",{className:"icon is-small"},r.a.createElement(y.a,{icon:E(a.language)?N.a:N.b}))))}));var z=Object(p.b)()((function(e){var t=e.t,a=e.reset;return r.a.createElement("div",null,r.a.createElement("div",{className:"box"},r.a.createElement("h2",{className:"title"},t("R\xe9sultats"))),r.a.createElement("button",{className:"button is-light",onClick:function(e){a(),e.preventDefault()}},r.a.createElement("span",null,t("Reprendre le test"))))})),U=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).addAnswer=function(e,t,a){n.setState((function(n){var r,s=Object(x.a)(n.answers);return(null===(r=s.filter((function(e){return e.key===t})))||void 0===r?void 0:r[0])?{answers:s.map((function(n){return n.key!==t?n:{question_id:e,key:t,value:a}}))}:{answers:[].concat(Object(x.a)(n.answers),[{question_id:e,key:t,value:a}])}}))},n.removeAnswer=function(e){n.setState((function(t){return{answers:Object(x.a)(t.answers).filter((function(t){return t.key!==e}))}}))},n.stepForward=function(){for(var e=n.state,t=e.current_step,a=e.questions,r=e.answers,s=t+1,l=function(){var e=a[s-1];return null===e.depends_on_question||void 0===e.depends_on_question||r.filter((function(t){return t.question_id===e.depends_on_question}))[0].value===e.depends_on_question_value?"break":void 0};s<=a.length;s++){if("break"===l())break}return s<=a.length?(n.setState({current_step:s}),Promise.resolve()):s>a.length?j.post({answers:r}).then((function(e){return 201===e.status?(n.setState({current_step:s,results:e.data}),Promise.resolve()):Promise.reject()})):void 0},n.stepBack=function(){var e=n.state,t=e.current_step,a=e.questions,r=e.answers,s=t-1;if(r.length){var l=r[r.length-1];s=a.indexOf(a.filter((function(e){return e.key===l.key}))[0])+1,n.removeAnswer(l.key)}n.setState({current_step:s})},n.reset=function(){n.setState({current_step:0,answers:[],results:null})},n.state={loading:!0,loading_failed:!1,current_step:0,questions:[],answers:[],results:null},n}return Object(u.a)(a,[{key:"loadQuestions",value:function(){var e=this;this.setState({loading:!0,loading_failed:!1}),j.get().then((function(t){200===t.status&&e.setState({questions:t.data}),e.setState({loading:!1})})).catch((function(t){e.setState({loading:!1,loading_failed:!0})}))}},{key:"refresh",value:function(){this.loadQuestions()}},{key:"componentDidMount",value:function(){this.loadQuestions()}},{key:"render",value:function(){var e,t=this,a=this.props.t,n=this.state,s=n.current_step,l=n.questions,i=n.answers,c=n.loading,o=n.loading_failed;if(0===s)e="INFORMATION_TAB";else if(s>0&&s<=l.length)e="QUESTIONS_TAB";else{if(s!==l.length+1)throw Error("Invalid current_step value: ".concat(s));e="RESULTS_TAB"}return r.a.createElement("div",{className:"container"},c&&r.a.createElement(C,null),!c&&o&&r.a.createElement(L,{message:a("Une erreur est survenue."),buttonLabel:a("Rafraishir"),handleButtonClick:function(e){e.preventDefault(),t.refresh()}}),!c&&!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section"},r.a.createElement("nav",{class:"level"},r.a.createElement("div",{class:"level-item has-text-centered"}),r.a.createElement("div",{class:"level-item has-text-centered"},r.a.createElement("span",{className:"tag ".concat("INFORMATION_TAB"===e?"is-primary":"is-light")},"1")," ",a("Informations")),r.a.createElement("div",{class:"level-item has-text-centered"},r.a.createElement("span",{className:"tag ".concat("QUESTIONS_TAB"===e?"is-primary":"is-light")},"2")," ",a("Questionnaire")),r.a.createElement("div",{class:"level-item has-text-centered"},r.a.createElement("span",{className:"tag ".concat("RESULTS_TAB"===e?"is-primary":"is-light")},"3")," ",a("R\xe9sultats")),r.a.createElement("div",{class:"level-item has-text-centered"}))),r.a.createElement("div",{className:"section"},"INFORMATION_TAB"===e&&r.a.createElement(S,{stepForward:this.stepForward}),"QUESTIONS_TAB"===e&&r.a.createElement(V,{current_step:s,questions:l,answers:i,addAnswer:this.addAnswer,removeAnswer:this.removeAnswer,stepForward:this.stepForward,stepBack:this.stepBack}),"RESULTS_TAB"===e&&r.a.createElement(z,{reset:this.reset}))))}}]),a}(r.a.Component),M=[{component:h,routes:[{path:"/",exact:!0,component:k},{path:"/survey",exact:!0,component:Object(p.b)()(U)}]}];Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(94),a(95);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,Object(c.a)(M))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[56,1,2]]]);
//# sourceMappingURL=main.6a1a8885.chunk.js.map